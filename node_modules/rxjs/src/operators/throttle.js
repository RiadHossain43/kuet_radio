"use strict";function throttle(i,r){return void 0===r&&(r=exports.defaultThrottleConfig),function(t){return t.lift(new ThrottleOperator(i,r.leading,r.trailing))}}var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.defaultThrottleConfig={leading:!0,trailing:!1},exports.throttle=throttle;var ThrottleOperator=function(){function t(t,i,r){this.durationSelector=t,this.leading=i,this.trailing=r}return t.prototype.call=function(t,i){return i.subscribe(new ThrottleSubscriber(t,this.durationSelector,this.leading,this.trailing))},t}(),ThrottleSubscriber=function(o){function t(t,i,r,e){var n=o.call(this,t)||this;return n.destination=t,n.durationSelector=i,n._leading=r,n._trailing=e,n._hasTrailingValue=!1,n}return __extends(t,o),t.prototype._next=function(t){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t);else{var i=this.tryDurationSelector(t);i&&this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,i)),this._leading&&(this.destination.next(t),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t))}},t.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},t.prototype._unsubscribe=function(){var t=this,i=t.throttled;t._trailingValue,t._hasTrailingValue,t._trailing;this._trailingValue=null,this._hasTrailingValue=!1,i&&(this.remove(i),this.throttled=null,i.unsubscribe())},t.prototype._sendTrailing=function(){var t=this,i=t.destination,r=t.throttled,e=t._trailing,n=t._trailingValue,o=t._hasTrailingValue;r&&e&&o&&(i.next(n),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(t,i,r,e,n){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(OuterSubscriber_1.OuterSubscriber);
"use strict";function switchMap(e,r){return function(t){return t.lift(new SwitchMapOperator(e,r))}}var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.switchMap=switchMap;var SwitchMapOperator=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new SwitchMapSubscriber(t,this.project,this.resultSelector))},t}(),SwitchMapSubscriber=function(o){function t(t,e,r){var i=o.call(this,t)||this;return i.project=e,i.resultSelector=r,i.index=0,i}return __extends(t,o),t.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){var i=this.innerSubscription;i&&i.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,t,e,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||o.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&o.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,r,i,o){this.resultSelector?this._tryNotifyNext(t,e,r,i):this.destination.next(e)},t.prototype._tryNotifyNext=function(t,e,r,i){var o;try{o=this.resultSelector(t,e,r,i)}catch(t){return void this.destination.error(t)}this.destination.next(o)},t}(OuterSubscriber_1.OuterSubscriber);